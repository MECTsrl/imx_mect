--- ltib/dist/lfs-5.1/cantest/cantest.spec	2013-01-09 04:58:38.000000000 +0100
+++ ltib.new/dist/lfs-5.1/cantest/cantest.spec	2015-10-12 10:46:10.714466000 +0200
@@ -9,13 +9,24 @@
 Packager        : Chen Hongjun
 Group           : Applications/System
 Source          : %{name}-%{version}.tar.gz
+URL             : http://svn.berlios.de/svnroot/repos/socketcan/trunk/can-utils/
 Patch0		: cantest-1.0.patch
 Patch1          : cantest-1.0-uClinux.patch
 Patch2          : cantest-1.0-cansend-1.patch
 Patch3          : cantest-1.0-cansend-debug.patch
 BuildRoot       : %{_tmppath}/%{name}
 Prefix          : %{pfx}
-URL             : http://svn.berlios.de/svnroot/repos/socketcan/trunk/can-utils/
+AutoReqProv     : no
+
+
+%Package rfs
+Summary         : Trimmed cantest for root file system requirements.
+Group           : Applications/File
+AutoReqProv     : no
+%Description rfs
+cantest package contents restricted to just the files that
+are needed at run time on the target.
+
 
 %Description
 %{summary}
@@ -34,12 +45,21 @@
 
 %Install
 rm -rf $RPM_BUILD_ROOT
-mkdir -p $RPM_BUILD_ROOT/%{pfx}/usr/bin
-cp cantest $RPM_BUILD_ROOT/%{pfx}/usr/bin
+mkdir -p $RPM_BUILD_ROOT%{pfx}%{_prefix}/bin
+cp cantest $RPM_BUILD_ROOT%{pfx}%{_prefix}/bin
+
+cd %{_builddir}/%{name}-%{version}
+( cd $RPM_BUILD_ROOT; find .%{pfx} \( \( -not -type d \) -o \( -type d -empty \) \) -print | sed 's/^\.//' ) > all_files.lst
+sed -n '
+    p
+' all_files.lst > rfs_files.lst
 
 %Clean
 rm -rf $RPM_BUILD_ROOT
 
-%Files
+%Files -f all_files.lst
+%defattr(-,root,root)
+
+
+%Files rfs -f rfs_files.lst
 %defattr(-,root,root)
-%{pfx}/*
